(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{544:function(e,v,_){"use strict";_.r(v);var t=_(2),a=Object(t.a)({},(function(){var e=this,v=e.$createElement,_=e._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("p",[e._v("介绍MySQL的基础操作和指令。")]),e._v(" "),_("h2",{attrs:{id:"通用语法及分类"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#通用语法及分类"}},[e._v("#")]),e._v(" 通用语法及分类")]),e._v(" "),_("ul",[_("li",[e._v("DDL: 数据定义语言，用来定义数据库对象（数据库、表、字段）")]),e._v(" "),_("li",[e._v("DML: 数据操作语言，用来对数据库表中的数据进行增删改")]),e._v(" "),_("li",[e._v("DQL: 数据查询语言，用来查询数据库中表的记录")]),e._v(" "),_("li",[e._v("DCL: 数据控制语言，用来创建数据库用户、控制数据库的控制权限")])]),e._v(" "),_("h3",{attrs:{id:"ddl（数据定义语言）"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ddl（数据定义语言）"}},[e._v("#")]),e._v(" DDL（数据定义语言）")]),e._v(" "),_("p",[e._v("数据定义语言")]),e._v(" "),_("h4",{attrs:{id:"数据库操作"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#数据库操作"}},[e._v("#")]),e._v(" 数据库操作")]),e._v(" "),_("p",[e._v("查询所有数据库：\n"),_("code",[e._v("SHOW DATABASES;")]),e._v("\n查询当前数据库：\n"),_("code",[e._v("SELECT DATABASE();")]),e._v("\n创建数据库：\n"),_("code",[e._v("CREATE DATABASE [ IF NOT EXISTS ] 数据库名 [ DEFAULT CHARSET 字符集] [COLLATE 排序规则 ];")]),e._v("\n删除数据库：\n"),_("code",[e._v("DROP DATABASE [ IF EXISTS ] 数据库名;")]),e._v("\n使用数据库：\n"),_("code",[e._v("USE 数据库名;")])]),e._v(" "),_("h5",{attrs:{id:"注意事项"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[e._v("#")]),e._v(" 注意事项")]),e._v(" "),_("ul",[_("li",[e._v("UTF8字符集长度为3字节，有些符号占4字节，所以推荐用utf8mb4字符集")])]),e._v(" "),_("h4",{attrs:{id:"表操作"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#表操作"}},[e._v("#")]),e._v(" 表操作")]),e._v(" "),_("p",[e._v("查询当前数据库所有表：\n"),_("code",[e._v("SHOW TABLES;")]),e._v("\n查询表结构：\n"),_("code",[e._v("DESC 表名;")]),e._v("\n查询指定表的建表语句：\n"),_("code",[e._v("SHOW CREATE TABLE 表名;")])]),e._v(" "),_("p",[e._v("创建表：")]),e._v(" "),_("div",{staticClass:"language-mysql extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v("CREATE TABLE 表名(\n 字段1 字段1类型 [COMMENT 字段1注释],\n 字段2 字段2类型 [COMMENT 字段2注释],\n 字段3 字段3类型 [COMMENT 字段3注释],\n ...\n 字段n 字段n类型 [COMMENT 字段n注释]\n)[ COMMENT 表注释 ];\n")])])]),_("p",[_("strong",[e._v("最后一个字段后面没有逗号")])]),e._v(" "),_("p",[e._v("添加字段：\n"),_("code",[e._v("ALTER TABLE 表名 ADD 字段名 类型(长度) [COMMENT 注释] [约束];")]),e._v("\n例："),_("code",[e._v("ALTER TABLE emp ADD nickname varchar(20) COMMENT '昵称';")])]),e._v(" "),_("p",[e._v("修改数据类型：\n"),_("code",[e._v("ALTER TABLE 表名 MODIFY 字段名 新数据类型(长度);")]),e._v("\n修改字段名和字段类型：\n"),_("code",[e._v("ALTER TABLE 表名 CHANGE 旧字段名 新字段名 类型(长度) [COMMENT 注释] [约束];")]),e._v("\n例：将emp表的nickname字段修改为username，类型为varchar(30)\n"),_("code",[e._v("ALTER TABLE emp CHANGE nickname username varchar(30) COMMENT '昵称';")])]),e._v(" "),_("p",[e._v("删除字段：\n"),_("code",[e._v("ALTER TABLE 表名 DROP 字段名;")])]),e._v(" "),_("p",[e._v("修改表名：\n"),_("code",[e._v("ALTER TABLE 表名 RENAME TO 新表名")])]),e._v(" "),_("p",[e._v("删除表：\n"),_("code",[e._v("DROP TABLE [IF EXISTS] 表名;")]),e._v("\n删除表，并重新创建该表：\n"),_("code",[e._v("TRUNCATE TABLE 表名;")])]),e._v(" "),_("h3",{attrs:{id:"dml（数据操作语言）"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dml（数据操作语言）"}},[e._v("#")]),e._v(" DML（数据操作语言）")]),e._v(" "),_("h4",{attrs:{id:"添加数据"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#添加数据"}},[e._v("#")]),e._v(" 添加数据")]),e._v(" "),_("p",[e._v("指定字段：\n"),_("code",[e._v("INSERT INTO 表名 (字段名1, 字段名2, ...) VALUES (值1, 值2, ...);")]),e._v("\n全部字段：\n"),_("code",[e._v("INSERT INTO 表名 VALUES (值1, 值2, ...);")])]),e._v(" "),_("p",[e._v("批量添加数据：\n"),_("code",[e._v("INSERT INTO 表名 (字段名1, 字段名2, ...) VALUES (值1, 值2, ...), (值1, 值2, ...), (值1, 值2, ...);")]),e._v(" "),_("code",[e._v("INSERT INTO 表名 VALUES (值1, 值2, ...), (值1, 值2, ...), (值1, 值2, ...);")])]),e._v(" "),_("h5",{attrs:{id:"注意事项-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#注意事项-2"}},[e._v("#")]),e._v(" 注意事项")]),e._v(" "),_("ul",[_("li",[e._v("字符串和日期类型数据应该包含在引号中")]),e._v(" "),_("li",[e._v("插入的数据大小应该在字段的规定范围内")])]),e._v(" "),_("h4",{attrs:{id:"更新和删除数据"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#更新和删除数据"}},[e._v("#")]),e._v(" 更新和删除数据")]),e._v(" "),_("p",[e._v("修改数据：\n"),_("code",[e._v("UPDATE 表名 SET 字段名1 = 值1, 字段名2 = 值2, ... [ WHERE 条件 ];")]),e._v("\n例：\n"),_("code",[e._v("UPDATE emp SET name = 'Jack' WHERE id = 1;")])]),e._v(" "),_("p",[e._v("删除数据：\n"),_("code",[e._v("DELETE FROM 表名 [ WHERE 条件 ];")])]),e._v(" "),_("h3",{attrs:{id:"dql（数据查询语言）"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dql（数据查询语言）"}},[e._v("#")]),e._v(" DQL（数据查询语言）")]),e._v(" "),_("p",[e._v("语法：")]),e._v(" "),_("div",{staticClass:"language-mysql extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v("SELECT\n 字段列表\nFROM\n 表名字段\nWHERE\n 条件列表\nGROUP BY\n 分组字段列表\nHAVING\n 分组后的条件列表\nORDER BY\n 排序字段列表\nLIMIT\n 分页参数\n")])])]),_("h4",{attrs:{id:"基础查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#基础查询"}},[e._v("#")]),e._v(" 基础查询")]),e._v(" "),_("p",[e._v("查询多个字段：\n"),_("code",[e._v("SELECT 字段1, 字段2, 字段3, ... FROM 表名;")]),e._v(" "),_("code",[e._v("SELECT * FROM 表名;")])]),e._v(" "),_("p",[e._v("设置别名：\n"),_("code",[e._v("SELECT 字段1 [ AS 别名1 ], 字段2 [ AS 别名2 ], 字段3 [ AS 别名3 ], ... FROM 表名;")]),e._v(" "),_("code",[e._v("SELECT 字段1 [ 别名1 ], 字段2 [ 别名2 ], 字段3 [ 别名3 ], ... FROM 表名;")])]),e._v(" "),_("p",[e._v("去除重复记录：\n"),_("code",[e._v("SELECT DISTINCT 字段列表 FROM 表名;")])]),e._v(" "),_("p",[e._v("转义：\n"),_("code",[e._v("SELECT * FROM 表名 WHERE name LIKE '/_张三' ESCAPE '/'")]),e._v("\n/ 之后的_不作为通配符")]),e._v(" "),_("h4",{attrs:{id:"条件查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#条件查询"}},[e._v("#")]),e._v(" 条件查询")]),e._v(" "),_("p",[e._v("语法：\n"),_("code",[e._v("SELECT 字段列表 FROM 表名 WHERE 条件列表;")])]),e._v(" "),_("p",[e._v("条件：")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("比较运算符")]),e._v(" "),_("th",[e._v("功能")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v(">")]),e._v(" "),_("td",[e._v("大于")])]),e._v(" "),_("tr",[_("td",[e._v(">=")]),e._v(" "),_("td",[e._v("大于等于")])]),e._v(" "),_("tr",[_("td",[e._v("<")]),e._v(" "),_("td",[e._v("小于")])]),e._v(" "),_("tr",[_("td",[e._v("<=")]),e._v(" "),_("td",[e._v("小于等于")])]),e._v(" "),_("tr",[_("td",[e._v("=")]),e._v(" "),_("td",[e._v("等于")])]),e._v(" "),_("tr",[_("td",[e._v("<> 或 !=")]),e._v(" "),_("td",[e._v("不等于")])]),e._v(" "),_("tr",[_("td",[e._v("BETWEEN ... AND ...")]),e._v(" "),_("td",[e._v("在某个范围内（含最小、最大值）")])]),e._v(" "),_("tr",[_("td",[e._v("IN(...)")]),e._v(" "),_("td",[e._v("在in之后的列表中的值，多选一")])]),e._v(" "),_("tr",[_("td",[e._v("LIKE 占位符")]),e._v(" "),_("td",[e._v("模糊匹配（_匹配单个字符，%匹配任意个字符）")])]),e._v(" "),_("tr",[_("td",[e._v("IS NULL")]),e._v(" "),_("td",[e._v("是NULL")])])])]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("逻辑运算符")]),e._v(" "),_("th",[e._v("功能")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("AND 或 &&")]),e._v(" "),_("td",[e._v("并且（多个条件同时成立）")])]),e._v(" "),_("tr",[_("td",[e._v("OR 或 ||")]),e._v(" "),_("td",[e._v("或者（多个条件任意一个成立）")])]),e._v(" "),_("tr",[_("td",[e._v("NOT 或 !")]),e._v(" "),_("td",[e._v("非，不是")])])])]),e._v(" "),_("p",[e._v("例子：")]),e._v(" "),_("div",{staticClass:"language-mysql extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v("-- 年龄等于30\nselect * from employee where age = 30;\n-- 年龄小于30\nselect * from employee where age < 30;\n-- 小于等于\nselect * from employee where age <= 30;\n-- 没有身份证\nselect * from employee where idcard is null or idcard = '';\n-- 有身份证\nselect * from employee where idcard;\nselect * from employee where idcard is not null;\n-- 不等于\nselect * from employee where age != 30;\n-- 年龄在20到30之间\nselect * from employee where age between 20 and 30;\nselect * from employee where age >= 20 and age <= 30;\n-- 下面语句不报错，但查不到任何信息\nselect * from employee where age between 30 and 20;\n-- 性别为女且年龄小于30\nselect * from employee where age < 30 and gender = '女';\n-- 年龄等于25或30或35\nselect * from employee where age = 25 or age = 30 or age = 35;\nselect * from employee where age in (25, 30, 35);\n-- 姓名为两个字\nselect * from employee where name like '__';\n-- 身份证最后为X\nselect * from employee where idcard like '%X';\n")])])]),_("h4",{attrs:{id:"聚合查询（聚合函数）"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#聚合查询（聚合函数）"}},[e._v("#")]),e._v(" 聚合查询（聚合函数）")]),e._v(" "),_("p",[e._v("常见聚合函数：")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("函数")]),e._v(" "),_("th",[e._v("功能")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("count")]),e._v(" "),_("td",[e._v("统计数量")])]),e._v(" "),_("tr",[_("td",[e._v("max")]),e._v(" "),_("td",[e._v("最大值")])]),e._v(" "),_("tr",[_("td",[e._v("min")]),e._v(" "),_("td",[e._v("最小值")])]),e._v(" "),_("tr",[_("td",[e._v("avg")]),e._v(" "),_("td",[e._v("平均值")])]),e._v(" "),_("tr",[_("td",[e._v("sum")]),e._v(" "),_("td",[e._v("求和")])])])]),e._v(" "),_("p",[e._v("语法：\n"),_("code",[e._v("SELECT 聚合函数(字段列表) FROM 表名;")]),e._v("\n例：\n"),_("code",[e._v('SELECT count(id) from employee where workaddress = "广东省";')])]),e._v(" "),_("h4",{attrs:{id:"分组查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#分组查询"}},[e._v("#")]),e._v(" 分组查询")]),e._v(" "),_("p",[e._v("语法：\n"),_("code",[e._v("SELECT 字段列表 FROM 表名 [ WHERE 条件 ] GROUP BY 分组字段名 [ HAVING 分组后的过滤条件 ];")])]),e._v(" "),_("p",[e._v("where 和 having 的区别：")]),e._v(" "),_("ul",[_("li",[e._v("执行时机不同：where是分组之前进行过滤，不满足where条件不参与分组；having是分组后对结果进行过滤。")]),e._v(" "),_("li",[e._v("判断条件不同：where不能对聚合函数进行判断，而having可以。")])]),e._v(" "),_("p",[e._v("例子：")]),e._v(" "),_("div",{staticClass:"language-mysql extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v("-- 根据性别分组，统计男性和女性数量（只显示分组数量，不显示哪个是男哪个是女）\nselect count(*) from employee group by gender;\n-- 根据性别分组，统计男性和女性数量\nselect gender, count(*) from employee group by gender;\n-- 根据性别分组，统计男性和女性的平均年龄\nselect gender, avg(age) from employee group by gender;\n-- 年龄小于45，并根据工作地址分组\nselect workaddress, count(*) from employee where age < 45 group by workaddress;\n-- 年龄小于45，并根据工作地址分组，获取员工数量大于等于3的工作地址\nselect workaddress, count(*) address_count from employee where age < 45 group by workaddress having address_count >= 3;\n")])])]),_("h5",{attrs:{id:"注意事项-3"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#注意事项-3"}},[e._v("#")]),e._v(" 注意事项")]),e._v(" "),_("ul",[_("li",[e._v("执行顺序：where > 聚合函数 > having")]),e._v(" "),_("li",[e._v("分组之后，查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义")])]),e._v(" "),_("h4",{attrs:{id:"排序查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#排序查询"}},[e._v("#")]),e._v(" 排序查询")]),e._v(" "),_("p",[e._v("语法：\n"),_("code",[e._v("SELECT 字段列表 FROM 表名 ORDER BY 字段1 排序方式1, 字段2 排序方式2;")])]),e._v(" "),_("p",[e._v("排序方式：")]),e._v(" "),_("ul",[_("li",[e._v("ASC: 升序（默认）")]),e._v(" "),_("li",[e._v("DESC: 降序")])]),e._v(" "),_("p",[e._v("例子：")]),e._v(" "),_("div",{staticClass:"language-mysql extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v("-- 根据年龄升序排序\nSELECT * FROM employee ORDER BY age ASC;\nSELECT * FROM employee ORDER BY age;\n-- 两字段排序，根据年龄升序排序，入职时间降序排序\nSELECT * FROM employee ORDER BY age ASC, entrydate DESC;\n")])])]),_("h5",{attrs:{id:"注意事项-4"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#注意事项-4"}},[e._v("#")]),e._v(" 注意事项")]),e._v(" "),_("p",[e._v("如果是多字段排序，当第一个字段值相同时，才会根据第二个字段进行排序")]),e._v(" "),_("h4",{attrs:{id:"分页查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#分页查询"}},[e._v("#")]),e._v(" 分页查询")]),e._v(" "),_("p",[e._v("语法：\n"),_("code",[e._v("SELECT 字段列表 FROM 表名 LIMIT 起始索引, 查询记录数;")])]),e._v(" "),_("p",[e._v("例子：")]),e._v(" "),_("div",{staticClass:"language-mysql extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v("-- 查询第一页数据，展示10条\nSELECT * FROM employee LIMIT 0, 10;\n-- 查询第二页\nSELECT * FROM employee LIMIT 10, 10;\n")])])]),_("h5",{attrs:{id:"注意事项-5"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#注意事项-5"}},[e._v("#")]),e._v(" 注意事项")]),e._v(" "),_("ul",[_("li",[e._v("起始索引从0开始，起始索引 = （查询页码 - 1） * 每页显示记录数")]),e._v(" "),_("li",[e._v("分页查询是数据库的方言，不同数据库有不同实现，MySQL是LIMIT")]),e._v(" "),_("li",[e._v("如果查询的是第一页数据，起始索引可以省略，直接简写 LIMIT 10")])]),e._v(" "),_("h4",{attrs:{id:"dql执行顺序"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dql执行顺序"}},[e._v("#")]),e._v(" DQL执行顺序")]),e._v(" "),_("p",[e._v("FROM -> WHERE -> GROUP BY -> SELECT -> ORDER BY -> LIMIT")]),e._v(" "),_("h3",{attrs:{id:"dcl（数据控制语言）"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dcl（数据控制语言）"}},[e._v("#")]),e._v(" DCL（数据控制语言）")]),e._v(" "),_("h4",{attrs:{id:"管理用户"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#管理用户"}},[e._v("#")]),e._v(" 管理用户")]),e._v(" "),_("p",[e._v("查询用户：")]),e._v(" "),_("div",{staticClass:"language-mysql extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v("USE mysql;\nSELECT * FROM user;\n")])])]),_("p",[e._v("创建用户:\n"),_("code",[e._v("CREATE USER '用户名'@'主机名' IDENTIFIED BY '密码';")])]),e._v(" "),_("p",[e._v("修改用户密码：\n"),_("code",[e._v("ALTER USER '用户名'@'主机名' IDENTIFIED WITH mysql_native_password BY '新密码';")])]),e._v(" "),_("p",[e._v("删除用户：\n"),_("code",[e._v("DROP USER '用户名'@'主机名';")])]),e._v(" "),_("p",[e._v("例子：")]),e._v(" "),_("div",{staticClass:"language-mysql extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v("-- 创建用户test，只能在当前主机localhost访问\ncreate user 'test'@'localhost' identified by '123456';\n-- 创建用户test，能在任意主机访问\ncreate user 'test'@'%' identified by '123456';\ncreate user 'test' identified by '123456';\n-- 修改密码\nalter user 'test'@'localhost' identified with mysql_native_password by '1234';\n-- 删除用户\ndrop user 'test'@'localhost';\n")])])]),_("h5",{attrs:{id:"注意事项-6"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#注意事项-6"}},[e._v("#")]),e._v(" 注意事项")]),e._v(" "),_("ul",[_("li",[e._v("主机名可以使用 % 通配")])]),e._v(" "),_("h4",{attrs:{id:"权限控制"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#权限控制"}},[e._v("#")]),e._v(" 权限控制")]),e._v(" "),_("p",[e._v("常用权限：")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("权限")]),e._v(" "),_("th",[e._v("说明")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("ALL, ALL PRIVILEGES")]),e._v(" "),_("td",[e._v("所有权限")])]),e._v(" "),_("tr",[_("td",[e._v("SELECT")]),e._v(" "),_("td",[e._v("查询数据")])]),e._v(" "),_("tr",[_("td",[e._v("INSERT")]),e._v(" "),_("td",[e._v("插入数据")])]),e._v(" "),_("tr",[_("td",[e._v("UPDATE")]),e._v(" "),_("td",[e._v("修改数据")])]),e._v(" "),_("tr",[_("td",[e._v("DELETE")]),e._v(" "),_("td",[e._v("删除数据")])]),e._v(" "),_("tr",[_("td",[e._v("ALTER")]),e._v(" "),_("td",[e._v("修改表")])]),e._v(" "),_("tr",[_("td",[e._v("DROP")]),e._v(" "),_("td",[e._v("删除数据库/表/视图")])]),e._v(" "),_("tr",[_("td",[e._v("CREATE")]),e._v(" "),_("td",[e._v("创建数据库/表")])])])]),e._v(" "),_("p",[e._v("更多权限请看"),_("a",{attrs:{href:"#%E6%9D%83%E9%99%90%E4%B8%80%E8%A7%88%E8%A1%A8",title:"权限一览表"}},[e._v("权限一览表")])]),e._v(" "),_("p",[e._v("查询权限：\n"),_("code",[e._v("SHOW GRANTS FOR '用户名'@'主机名';")])]),e._v(" "),_("p",[e._v("授予权限：\n"),_("code",[e._v("GRANT 权限列表 ON 数据库名.表名 TO '用户名'@'主机名';")])]),e._v(" "),_("p",[e._v("撤销权限：\n"),_("code",[e._v("REVOKE 权限列表 ON 数据库名.表名 FROM '用户名'@'主机名';")])]),e._v(" "),_("h5",{attrs:{id:"注意事项-7"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#注意事项-7"}},[e._v("#")]),e._v(" 注意事项")]),e._v(" "),_("ul",[_("li",[e._v("多个权限用逗号分隔")]),e._v(" "),_("li",[e._v("授权时，数据库名和表名可以用 * 进行通配，代表所有")])])])}),[],!1,null,null,null);v.default=a.exports}}]);