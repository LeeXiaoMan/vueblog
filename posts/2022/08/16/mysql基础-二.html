<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL基础(2) | ALeeLee 的博客 ｜ ALeeLee Blog</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/vueblog/favicon.ico">
    <meta name="description" content="个人博客，前端开发">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/vueblog/assets/css/0.styles.13617540.css" as="style"><link rel="preload" href="/vueblog/assets/js/app.fdc44102.js" as="script"><link rel="preload" href="/vueblog/assets/js/8.890bf07c.js" as="script"><link rel="preload" href="/vueblog/assets/js/49.8a32e349.js" as="script"><link rel="prefetch" href="/vueblog/assets/js/10.ccfcf924.js"><link rel="prefetch" href="/vueblog/assets/js/11.fffff3ae.js"><link rel="prefetch" href="/vueblog/assets/js/12.b7c7a473.js"><link rel="prefetch" href="/vueblog/assets/js/13.bcdd9a69.js"><link rel="prefetch" href="/vueblog/assets/js/14.4ef60985.js"><link rel="prefetch" href="/vueblog/assets/js/15.eadc1f16.js"><link rel="prefetch" href="/vueblog/assets/js/16.8cd4ac1d.js"><link rel="prefetch" href="/vueblog/assets/js/17.4c6eb07c.js"><link rel="prefetch" href="/vueblog/assets/js/18.604dc414.js"><link rel="prefetch" href="/vueblog/assets/js/19.680333a9.js"><link rel="prefetch" href="/vueblog/assets/js/2.d2666a5a.js"><link rel="prefetch" href="/vueblog/assets/js/20.c1ac332d.js"><link rel="prefetch" href="/vueblog/assets/js/21.32d48dc9.js"><link rel="prefetch" href="/vueblog/assets/js/22.0b05bbff.js"><link rel="prefetch" href="/vueblog/assets/js/23.20dcf299.js"><link rel="prefetch" href="/vueblog/assets/js/24.797a5d9a.js"><link rel="prefetch" href="/vueblog/assets/js/25.41573d9b.js"><link rel="prefetch" href="/vueblog/assets/js/26.3416257d.js"><link rel="prefetch" href="/vueblog/assets/js/27.21655063.js"><link rel="prefetch" href="/vueblog/assets/js/28.e3172734.js"><link rel="prefetch" href="/vueblog/assets/js/29.ae073ac8.js"><link rel="prefetch" href="/vueblog/assets/js/3.db55bc90.js"><link rel="prefetch" href="/vueblog/assets/js/30.bff53c8b.js"><link rel="prefetch" href="/vueblog/assets/js/31.2a4354c1.js"><link rel="prefetch" href="/vueblog/assets/js/32.93ef2d63.js"><link rel="prefetch" href="/vueblog/assets/js/33.4e80798b.js"><link rel="prefetch" href="/vueblog/assets/js/34.86db27ea.js"><link rel="prefetch" href="/vueblog/assets/js/35.c2f6907a.js"><link rel="prefetch" href="/vueblog/assets/js/36.4e1d51bf.js"><link rel="prefetch" href="/vueblog/assets/js/37.e8703fc1.js"><link rel="prefetch" href="/vueblog/assets/js/38.009e7cf7.js"><link rel="prefetch" href="/vueblog/assets/js/39.14cddf42.js"><link rel="prefetch" href="/vueblog/assets/js/4.60c9c8ac.js"><link rel="prefetch" href="/vueblog/assets/js/40.8b66ecef.js"><link rel="prefetch" href="/vueblog/assets/js/41.4657fc0d.js"><link rel="prefetch" href="/vueblog/assets/js/42.1717e97e.js"><link rel="prefetch" href="/vueblog/assets/js/43.2c166830.js"><link rel="prefetch" href="/vueblog/assets/js/44.2a16ca95.js"><link rel="prefetch" href="/vueblog/assets/js/45.1a8cda16.js"><link rel="prefetch" href="/vueblog/assets/js/46.c3b8e30d.js"><link rel="prefetch" href="/vueblog/assets/js/47.aa4b7dc2.js"><link rel="prefetch" href="/vueblog/assets/js/48.2bcc3370.js"><link rel="prefetch" href="/vueblog/assets/js/5.4216761d.js"><link rel="prefetch" href="/vueblog/assets/js/50.99b1935d.js"><link rel="prefetch" href="/vueblog/assets/js/51.d3e4f00b.js"><link rel="prefetch" href="/vueblog/assets/js/52.4e0c21e1.js"><link rel="prefetch" href="/vueblog/assets/js/53.838e4e42.js"><link rel="prefetch" href="/vueblog/assets/js/54.2186c83c.js"><link rel="prefetch" href="/vueblog/assets/js/55.2acdd06f.js"><link rel="prefetch" href="/vueblog/assets/js/6.364979c9.js"><link rel="prefetch" href="/vueblog/assets/js/7.f092bbd1.js"><link rel="prefetch" href="/vueblog/assets/js/9.587698b9.js">
    <link rel="stylesheet" href="/vueblog/assets/css/0.styles.13617540.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="global-layout" data-v-7f2e4136><header class="header-container" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(../../../../../post-bg.jpeg);" data-v-93921ff8 data-v-7f2e4136><nav class="navbar" style="position:absolute;opacity:1;transition:all 0.5s ease-in-out;" data-v-93921ff8><a href="/vueblog/" class="navbar-link router-link-active">
    ALeeLee Blog
  </a> <ul class="navbar-links"><li><a href="/vueblog/" class="router-link-active">
        HOME
      </a></li><li><a href="/vueblog/about/">
        ABOUT
      </a></li><li><a href="/vueblog/tags/">
        TAGS
      </a></li></ul> <div id="nav-icon"><span></span><span></span><span></span></div></nav> <div class="header-title" data-v-93921ff8 data-v-93921ff8><h1 data-v-93921ff8>MySQL基础(2)</h1> <p data-v-93921ff8></p></div></header> <div class="container" data-v-b3fda33c data-v-7f2e4136><main class="main" style="width:60%;" data-v-b3fda33c><div class="post" data-v-b3fda33c data-v-b3fda33c><article class="main-div"><div class="post-content content content__default"><p>介绍MySQL的基础操作和指令。</p> <h2 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h2> <ul><li>字符串函数</li> <li>数值函数</li> <li>日期函数</li> <li>流程函数</li></ul> <h3 id="字符串函数"><a href="#字符串函数" class="header-anchor">#</a> 字符串函数</h3> <p>常用函数：</p> <table><thead><tr><th>函数</th> <th>功能</th></tr></thead> <tbody><tr><td>CONCAT(s1, s2, ..., sn)</td> <td>字符串拼接，将s1, s2, ..., sn拼接成一个字符串</td></tr> <tr><td>LOWER(str)</td> <td>将字符串全部转为小写</td></tr> <tr><td>UPPER(str)</td> <td>将字符串全部转为大写</td></tr> <tr><td>LPAD(str, n, pad)</td> <td>左填充，用字符串pad对str的左边进行填充，达到n个字符串长度</td></tr> <tr><td>RPAD(str, n, pad)</td> <td>右填充，用字符串pad对str的右边进行填充，达到n个字符串长度</td></tr> <tr><td>TRIM(str)</td> <td>去掉字符串头部和尾部的空格</td></tr> <tr><td>SUBSTRING(str, start, len)</td> <td>返回从字符串str从start位置起的len个长度的字符串</td></tr></tbody></table> <p>使用示例：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>-- 拼接
SELECT CONCAT('Hello', 'World');
-- 小写
SELECT LOWER('Hello');
-- 大写
SELECT UPPER('Hello');
-- 左填充
SELECT LPAD('01', 5, '-');
-- 右填充
SELECT RPAD('01', 5, '-');
-- 去除空格
SELECT TRIM(' Hello World ');
-- 切片（起始索引为1）
SELECT SUBSTRING('Hello World', 1, 5);
</code></pre></div><h3 id="数值函数"><a href="#数值函数" class="header-anchor">#</a> 数值函数</h3> <p>常见函数：</p> <table><thead><tr><th>函数</th> <th>功能</th></tr></thead> <tbody><tr><td>CEIL(x)</td> <td>向上取整</td></tr> <tr><td>FLOOR(x)</td> <td>向下取整</td></tr> <tr><td>MOD(x, y)</td> <td>返回x/y的模</td></tr> <tr><td>RAND()</td> <td>返回0~1内的随机数</td></tr> <tr><td>ROUND(x, y)</td> <td>求参数x的四舍五入值，保留y位小数</td></tr></tbody></table> <h3 id="日期函数"><a href="#日期函数" class="header-anchor">#</a> 日期函数</h3> <p>常用函数：</p> <table><thead><tr><th>函数</th> <th>功能</th></tr></thead> <tbody><tr><td>CURDATE()</td> <td>返回当前日期</td></tr> <tr><td>CURTIME()</td> <td>返回当前时间</td></tr> <tr><td>NOW()</td> <td>返回当前日期和时间</td></tr> <tr><td>YEAR(date)</td> <td>获取指定date的年份</td></tr> <tr><td>MONTH(date)</td> <td>获取指定date的月份</td></tr> <tr><td>DAY(date)</td> <td>获取指定date的日期</td></tr> <tr><td>DATE_ADD(date, INTERVAL expr type)</td> <td>返回一个日期/时间值加上一个时间间隔expr后的时间值</td></tr> <tr><td>DATEDIFF(date1, date2)</td> <td>返回起始时间date1和结束时间date2之间的天数</td></tr></tbody></table> <p>例子：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>-- DATE_ADD
SELECT DATE_ADD(NOW(), INTERVAL 70 YEAR);
</code></pre></div><h3 id="流程函数"><a href="#流程函数" class="header-anchor">#</a> 流程函数</h3> <p>常用函数：</p> <table><thead><tr><th>函数</th> <th>功能</th></tr></thead> <tbody><tr><td>IF(value, t, f)</td> <td>如果value为true，则返回t，否则返回f</td></tr> <tr><td>IFNULL(value1, value2)</td> <td>如果value1不为空，返回value1，否则返回value2</td></tr> <tr><td>CASE WHEN [ val1 ] THEN [ res1 ] ... ELSE [ default ] END</td> <td>如果val1为true，返回res1，... 否则返回default默认值</td></tr> <tr><td>CASE [ expr ] WHEN [ val1 ] THEN [ res1 ] ... ELSE [ default ] END</td> <td>如果expr的值等于val1，返回res1，... 否则返回default默认值</td></tr></tbody></table> <p>例子：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>select
 name,
 (case when age &gt; 30 then '中年' else '青年' end)
from employee;
select
 name,
 (case workaddress when '北京市' then '一线城市' when '上海市' then '一线城市' else '二线城市' end) as '工作地址'
from employee;
</code></pre></div><h2 id="约束"><a href="#约束" class="header-anchor">#</a> 约束</h2> <p>分类：</p> <table><thead><tr><th>约束</th> <th>描述</th> <th>关键字</th></tr></thead> <tbody><tr><td>非空约束</td> <td>限制该字段的数据不能为null</td> <td>NOT NULL</td></tr> <tr><td>唯一约束</td> <td>保证该字段的所有数据都是唯一、不重复的</td> <td>UNIQUE</td></tr> <tr><td>主键约束</td> <td>主键是一行数据的唯一标识，要求非空且唯一</td> <td>PRIMARY KEY</td></tr> <tr><td>默认约束</td> <td>保存数据时，如果未指定该字段的值，则采用默认值</td> <td>DEFAULT</td></tr> <tr><td>检查约束（8.0.1版本后）</td> <td>保证字段值满足某一个条件</td> <td>CHECK</td></tr> <tr><td>外键约束</td> <td>用来让两张图的数据之间建立连接，保证数据的一致性和完整性</td> <td>FOREIGN KEY</td></tr></tbody></table> <p>约束是作用于表中字段上的，可以再创建表/修改表的时候添加约束。</p> <h3 id="常用约束"><a href="#常用约束" class="header-anchor">#</a> 常用约束</h3> <table><thead><tr><th>约束条件</th> <th>关键字</th></tr></thead> <tbody><tr><td>主键</td> <td>PRIMARY KEY</td></tr> <tr><td>自动增长</td> <td>AUTO_INCREMENT</td></tr> <tr><td>不为空</td> <td>NOT NULL</td></tr> <tr><td>唯一</td> <td>UNIQUE</td></tr> <tr><td>逻辑条件</td> <td>CHECK</td></tr> <tr><td>默认值</td> <td>DEFAULT</td></tr></tbody></table> <p>例子：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>create table user(
 id int primary key auto_increment,
 name varchar(10) not null unique,
 age int check(age &gt; 0 and age &lt; 120),
 status char(1) default '1',
 gender char(1)
);
</code></pre></div><h3 id="外键约束"><a href="#外键约束" class="header-anchor">#</a> 外键约束</h3> <p>添加外键：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>CREATE TABLE 表名(
 字段名 字段类型,
 ...
 [CONSTRAINT] [外键名称] FOREIGN KEY(外键字段名) REFERENCES 主表(主表列名)
);
ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段名) REFERENCES 主表(主表列名);

-- 例子
alter table emp add constraint fk_emp_dept_id foreign key(dept_id) references dept(id);
</code></pre></div><p>删除外键：
<code>ALTER TABLE 表名 DROP FOREIGN KEY 外键名;</code></p> <h4 id="删除-更新行为"><a href="#删除-更新行为" class="header-anchor">#</a> 删除/更新行为</h4> <table><thead><tr><th>行为</th> <th>说明</th></tr></thead> <tbody><tr><td>NO ACTION</td> <td>当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除/更新（与RESTRICT一致）</td></tr> <tr><td>RESTRICT</td> <td>当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除/更新（与NO ACTION一致）</td></tr> <tr><td>CASCADE</td> <td>当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有则也删除/更新外键在子表中的记录</td></tr> <tr><td>SET NULL</td> <td>当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有则设置子表中该外键值为null（要求该外键允许为null）</td></tr> <tr><td>SET DEFAULT</td> <td>父表有变更时，子表将外键设为一个默认值（Innodb不支持）</td></tr></tbody></table> <p>更改删除/更新行为：
<code>ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段) REFERENCES 主表名(主表字段名) ON UPDATE 行为 ON DELETE 行为;</code></p></div></article> <!----></div></main> <aside class="aside" data-v-b3fda33c data-v-b3fda33c><div class="info-card main-div" data-v-1311ce9e data-v-b3fda33c><div class="info-card-header" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(./avatar-bg.jpeg);" data-v-1311ce9e><img src="./avatar-top.jpg" alt="ALeeLee" class="info-avatar" data-v-1311ce9e></div> <div class="info-card-body" data-v-1311ce9e><section class="info-name" data-v-1311ce9e>
      ALeeLee
    </section> <section class="info-desc" data-v-1311ce9e>In me the tiger sniffs the rose<br/>心有猛虎，细嗅蔷薇</section> <section class="info-contact" data-v-1311ce9e><section data-v-1311ce9e><span data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:1em;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-location" data-v-1311ce9e data-v-1311ce9e></use></svg><span class="info-text" data-v-1311ce9e data-v-1311ce9e>
          Chongqing, China
        </span></span></section> <!----> <section data-v-1311ce9e><span data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:1em;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-email" data-v-1311ce9e data-v-1311ce9e></use></svg><span class="info-text" data-v-1311ce9e data-v-1311ce9e>
          992120608@qq.com
        </span></span></section></section></div> <div class="info-card-footer" data-v-1311ce9e><p class="footer-sns-link" data-v-1311ce9e><a target="_blank" class="sns-link" data-v-1311ce9e><span class="sns-icon" data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:35px;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-jianshu" data-v-1311ce9e data-v-1311ce9e></use></svg></span></a><a target="_blank" href="" class="sns-link" data-v-1311ce9e><span class="sns-icon" data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:35px;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-weibo" data-v-1311ce9e data-v-1311ce9e></use></svg></span></a><a target="_blank" class="sns-link" data-v-1311ce9e><span class="sns-icon" data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:35px;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-zhihu" data-v-1311ce9e data-v-1311ce9e></use></svg></span></a><a target="_blank" class="sns-link" data-v-1311ce9e><span class="sns-icon" data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:35px;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-github" data-v-1311ce9e data-v-1311ce9e></use></svg></span></a></p></div></div> <div class="post-toc main-div aside-toc" style="position:relative;top:0;width:0px;" data-v-b3fda33c><h4>- CATALOG</h4> <div class="post-nav-toc"><ul><li><a href="/vueblog/posts/2022/08/16/mysql%E5%9F%BA%E7%A1%80-%E4%BA%8C.html#函数">函数</a><ul><li><a href="/vueblog/posts/2022/08/16/mysql%E5%9F%BA%E7%A1%80-%E4%BA%8C.html#字符串函数">字符串函数</a></li><li><a href="/vueblog/posts/2022/08/16/mysql%E5%9F%BA%E7%A1%80-%E4%BA%8C.html#数值函数">数值函数</a></li><li><a href="/vueblog/posts/2022/08/16/mysql%E5%9F%BA%E7%A1%80-%E4%BA%8C.html#日期函数">日期函数</a></li><li><a href="/vueblog/posts/2022/08/16/mysql%E5%9F%BA%E7%A1%80-%E4%BA%8C.html#流程函数">流程函数</a></li></ul></li><li><a href="/vueblog/posts/2022/08/16/mysql%E5%9F%BA%E7%A1%80-%E4%BA%8C.html#约束">约束</a><ul><li><a href="/vueblog/posts/2022/08/16/mysql%E5%9F%BA%E7%A1%80-%E4%BA%8C.html#常用约束">常用约束</a></li><li><a href="/vueblog/posts/2022/08/16/mysql%E5%9F%BA%E7%A1%80-%E4%BA%8C.html#外键约束">外键约束</a></li></ul></li></ul></div></div></aside></div> <footer class="footer" data-v-7f2e4136><p class="footer-sns-link"><a target="_blank" class="sns-link"><span class="sns-icon"><svg class="icon" style="font-size:40px;"><use xlink:href="#icon-jianshu"></use></svg></span></a><a target="_blank" href="" class="sns-link"><span class="sns-icon"><svg class="icon" style="font-size:40px;"><use xlink:href="#icon-weibo"></use></svg></span></a><a target="_blank" class="sns-link"><span class="sns-icon"><svg class="icon" style="font-size:40px;"><use xlink:href="#icon-zhihu"></use></svg></span></a><a target="_blank" class="sns-link"><span class="sns-icon"><svg class="icon" style="font-size:40px;"><use xlink:href="#icon-github"></use></svg></span></a></p> <div class="copyright"><span id="custom">Copyright &copy; ALeeLee Blog 2020 <br /> 
      Theme By <a href="https://www.vuepress.cn/" target="_blank">VuePress</a>
      | <a href="https://www.github.com/youdeliang/" target="_blank">youdeliang</a></span> <iframe frameborder="0" scrolling="0" width="80px" height="20px" class="footer-btn" style="margin-left: 2px; margin-bottom:-5px;"></iframe></div></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/vueblog/assets/js/app.fdc44102.js" defer></script><script src="/vueblog/assets/js/8.890bf07c.js" defer></script><script src="/vueblog/assets/js/49.8a32e349.js" defer></script>
  </body>
</html>
